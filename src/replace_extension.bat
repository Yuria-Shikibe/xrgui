@echo off
setlocal enabledelayedexpansion

echo ========================================================
echo      批量修改文件后缀名 (包含所有子文件夹)
echo ========================================================
echo.

:: 1. 获取用户输入
set /p "SrcExt=请输入原后缀名 (不带点，例如 jpg): "
set /p "DstExt=请输入新后缀名 (不带点，例如 png): "

echo.
echo 正在扫描并重命名...
echo.

set /a count=0

:: 2. 递归遍历目录 (/r)
:: %%f 代表文件的完整路径
:: %%~nf 代表文件名（不含扩展名）
for /r %%f in (*.%SrcExt%) do (
    echo 处理中: "%%f"

    :: 执行重命名操作
    ren "%%f" "%%~nf.%DstExt%"

    set /a count+=1
)

echo.
echo ========================================================
echo 任务完成! 共修改了 !count! 个文件。
echo ========================================================
pause